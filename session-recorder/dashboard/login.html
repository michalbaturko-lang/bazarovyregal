<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign In - Regal Master Look</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { font-family: 'Inter', sans-serif; }

    @keyframes gradientShift {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .animated-bg {
      background: linear-gradient(135deg, #020617 0%, #0f172a 25%, #1e1b4b 50%, #0f172a 75%, #020617 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    .shake {
      animation: shake 0.5s ease-in-out;
    }

    .glass-card {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(51, 65, 85, 0.5);
    }
  </style>
</head>
<body class="animated-bg min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-sm">
    <!-- Brand -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 mb-4 shadow-lg shadow-blue-500/20">
        <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </div>
      <h1 class="text-xl font-bold text-white tracking-tight">Regal Master Look</h1>
      <p class="text-sm text-slate-400 mt-1">Sign in to your dashboard</p>
    </div>

    <!-- Login Card -->
    <div id="login-card" class="glass-card rounded-2xl p-6 shadow-2xl">
      <form id="login-form" class="space-y-5">
        <div>
          <label for="password" class="block text-xs font-medium text-slate-400 mb-1.5">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            autofocus
            required
            placeholder="Enter dashboard password"
            class="w-full bg-slate-800/70 border border-slate-600/50 rounded-lg px-3.5 py-2.5 text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/40 focus:border-blue-500/50 transition-all"
          />
        </div>

        <!-- Error message -->
        <div id="error-msg" class="hidden text-sm text-red-400 text-center py-1">
          Nespr&aacute;vn&eacute; heslo
        </div>

        <button
          type="submit"
          id="submit-btn"
          class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-medium text-sm py-2.5 rounded-lg transition-all duration-200 shadow-lg shadow-blue-600/20 hover:shadow-blue-500/30 focus:outline-none focus:ring-2 focus:ring-blue-500/40"
        >
          Sign In
        </button>
      </form>
    </div>

    <p class="text-center text-xs text-slate-600 mt-6">Self-hosted session analytics</p>
  </div>

  <script>
    const form = document.getElementById('login-form');
    const passwordInput = document.getElementById('password');
    const errorMsg = document.getElementById('error-msg');
    const loginCard = document.getElementById('login-card');
    const submitBtn = document.getElementById('submit-btn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorMsg.classList.add('hidden');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Signing in...';

      try {
        const res = await fetch('/api/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ password: passwordInput.value }),
        });

        if (res.ok) {
          window.location.href = '/';
        } else {
          errorMsg.classList.remove('hidden');
          loginCard.classList.add('shake');
          setTimeout(() => loginCard.classList.remove('shake'), 500);
          passwordInput.value = '';
          passwordInput.focus();
        }
      } catch (err) {
        errorMsg.textContent = 'Network error. Please try again.';
        errorMsg.classList.remove('hidden');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Sign In';
      }
    });
  </script>

</body>
</html>
